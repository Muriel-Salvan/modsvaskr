name: continuous-integration
on:
  - push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:

      - name: Check-out code
        uses: actions/checkout@v2

      - name: Install Ruby
        uses: actions/setup-ruby@v1
        with:
          ruby-version: '2.6'

      - name: Install dependencies
        run: bundle install

      # Need to use the shell step in order for ncurses to work in a TTY
      # cf https://github.com/actions/runner/issues/241
      - name: Run tests
        run: TERM=xterm-256color bundle exec rspec --format documentation
